(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var c=n.getElementsByTagName("script");c.length&&(t=c[c.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=document.querySelector(".slider-box__button-left"),n=document.querySelector(".slider-box__button-right"),c=document.querySelector(".slider-box__line"),a=document.querySelectorAll(".slider-box__dot"),o=document.querySelector(".slider-box"),r=document.querySelectorAll(".slider-box__image"),d=document.querySelector(".slider-box__dots-set");let s=0;function l(e){a.forEach((e=>e.classList.remove("active-dot"))),a[e].classList.add("active-dot")}function i(){s=+s+1,s>r.length-1&&(s=0),c.style.transform=`translateX(${-s*o.offsetWidth}px)`,l(s)}function m(){s=+s-1,s<0&&(s=r.length-1),c.style.transform=`translateX(${-s*o.offsetWidth}px)`,l(s)}function u(e){"slider-box__dot"===e.target.className&&(s=e.target.id,l(s),c.style.transform=`translateX(${-s*o.offsetWidth}px)`)}const p=e.p+"ad82ca55c005238fad2a.svg",_=e.p+"69097b8233f5741368bc.svg",b=()=>{const e=document.createElement("button");e.type="button",e.className="top-button";const t=new Image;return t.className="top-button__arrow",t.src=p,e.append(t),e};const f=e.p+"47d09f9a54e15b925b1d.svg";const g=e.p+"33b0413086e5f8be3a01.png";const h=document.querySelector(".product-cards__container");function E(e){h.innerHTML="",e.forEach((({image:e,price:t,oldPrice:n,productsBrand:c,productsName:a,id:o,inBasket:r})=>{const d=function(e,t,n,c,a,o,r){const d=document.createElement("div");d.className="product-card";const s=document.createElement("img");s.className="product-card__image",s.alt="product image",s.id=`${o}`,s.src=`${e}`,d.append(s);const l=document.createElement("div");l.className="product-card__info-wrapper",d.append(l);const i=document.createElement("div");i.className="product-card__price-box",l.append(i);const m=document.createElement("span");m.className="product-card__price",m.innerText=`${t} ₽ `,i.append(m);const u=document.createElement("span");u.className="product-card__discount",u.innerText=`-${Math.round(100*t/n)}% `,i.append(u);const p=document.createElement("span");p.className="product-card__old-price",p.innerText=`${n} ₽ `,i.append(p);const _=document.createElement("div");_.className="product-card__product-description-box",l.append(_);const b=document.createElement("span");b.className="product-card__product-brand",b.innerText=`${c} ·`,_.append(b);const f=document.createElement("span");f.className="product-card__product-name",f.innerText=`${a}`,_.append(f);const g=document.createElement("button");return g.className="product-card__button",g.id=`${o}`,g.disabled=r,g.type="button",g.innerText="В корзину",l.append(g),r&&(g.innerText="Товар в корзине",g.style.backgroundColor="rgba(74, 209, 97, 0.897)"),d}(e,t,n,c,a,o,r);h.append(d)}))}const N="https://63e9269e811db3d7eff7f6ff.mockapi.io/products";const v=function(e,t){let n;return function(){clearTimeout(n),n=setTimeout((()=>{e.apply(this,[...arguments])}),t)}}((async function(e){const t=document.querySelector(".product-cards__tittle"),n=document.querySelector(".product-cards__container"),c=e.target.value.trim(),a=await fetch(N),o=await a.json();if(c.length>0){const e=(r=c,o.filter((e=>e.productsName.toLowerCase().includes(r.toLowerCase())||e.productsBrand.toLowerCase().includes(r.toLowerCase()))));E(e),n.style.gridTemplateColumns="repeat(auto-fit, 200px)",t.innerText="Результат поиска",document.querySelector(".banner").style.display="none",0===e.length&&(t.innerText="К сожалению, такого товара нет... ")}else t.innerText="Хиты продаж",document.querySelector(".banner").style.display="block",n.style.gridTemplateColumns="repeat(auto-fit, minmax(180px, 1fr))",E(o);var r}),1e3);function y(e){return localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):[]}function k(e,t){localStorage.setItem(e,JSON.stringify(t))}const w="https://63e9269e811db3d7eff7f6ff.mockapi.io/products",x=document.querySelector(".product-cards__container");async function T(){const e=document.createElement("div");e.className="loader",document.querySelector(".product-card")||(x.append(e),e.toggleAttribute("hidden",!1));try{const t=await fetch(w),n=await t.json(),c=y("changeButton");c.length>0?E(c):E(n);const a=function(){const e=document.createElement("button");return e.className="show-more-btn",e.type="button",e.innerText="Показать еще ↓",e}();x.append(a);const o=Array.from(document.querySelectorAll(".product-card"));B(a,o),a.addEventListener("click",(()=>function(e,t){e.classList.add("hidden"),t.forEach((e=>e.classList.remove("hidden"))),e.classList.add("hidden")}(a,o))),window.addEventListener("resize",(()=>B(a,o)))}catch(e){console.warn(e)}finally{e.toggleAttribute("hidden",!0)}}const L="https://63e9269e811db3d7eff7f6ff.mockapi.io/products";async function S(e){if(!e.target.matches(".product-card__button"))return e.target;const t=y("cards"),n=y("changeButton"),c=e.target.id,a=await fetch(L),o=await a.json();if(n.length>0){const e=n[c-1];q(e,n),t.push(e),k("cards",t),T(),j()}else{const e=o[c-1];q(e,o),t.push(e),k("cards",t),T(),j()}}function q(e,t){e.inBasket=!e.inBasket,k("changeButton",t)}function $(){document.documentElement.scrollTo({left:0,top:0})}function B(e,t){e.classList.add("hidden"),window.innerWidth>1043?t.forEach(((t,n)=>{t.classList.add("hidden"),n<=17?t.classList.remove("hidden"):e.classList.remove("hidden")})):window.innerWidth<=1043&&window.innerWidth>443?t.forEach(((t,n)=>{t.classList.add("hidden"),n<=7?t.classList.remove("hidden"):e.classList.remove("hidden")})):t.forEach(((t,n)=>{t.classList.add("hidden"),n<=3?t.classList.remove("hidden"):e.classList.remove("hidden")}))}function A(e){e.target.closest(".modal-background").remove(),document.body.style.overflowY=""}function C(e){const t=function(){const e=document.createElement("div");return e.className="modal-background",e}();document.body.append(t),t.append(e),document.body.style.overflowY="hidden";document.querySelectorAll(".close-modal").forEach((e=>e.addEventListener("click",(e=>A(e)))))}async function D(){const e=document.querySelector(".modal-background");if(localStorage.getItem("cards")){e.innerHTML="",localStorage.clear(),T(),j(),e.append(I());document.querySelector(".close-modal").addEventListener("click",(e=>A(e)))}}function I(){const e=y("cards"),t=function(e){const t=document.createElement("div");t.className="basket-wrapper",document.body.append(t);const n=document.createElement("button");n.className="close-modal",n.type="button",t.append(n);const c=document.createElement("span");c.className="close-modal-cross",n.append(c);const a=document.createElement("div");a.className="basket-window",t.append(a);const o=document.createElement("header");o.className="basket-window__header",a.append(o);const r=document.createElement("h2");r.className="basket-window__header-title",r.innerText="Корзина",o.append(r);const d=document.createElement("div");d.className="basket-window__cards-container",a.append(d);const s=document.createElement("div");s.className="total-window",t.append(s);const l=document.createElement("header");l.className="total-window__header",s.append(l);const i=document.createElement("h2");i.className="total-window__header-title",i.innerText="Итого",l.append(i);const m=document.createElement("h2");m.className="total-window__header-total-cost",m.innerText=`${e} ₽`,l.append(m);const u=document.createElement("button");u.className="total-window__remove-btn",u.type="button",u.innerText="Очистить корзину",s.append(u);const p=document.createElement("button");return p.className="total-window__order-btn",p.type="button",p.innerText="Заказать",s.append(p),t}(e.reduce(((e,t)=>e+t.price),0));M(e),document.querySelector(".basket-window__cards-container").addEventListener("click",H),document.querySelector(".basket-window__cards-container").addEventListener("click",W);document.querySelector(".total-window__remove-btn").addEventListener("click",D);return document.querySelector(".total-window__order-btn").addEventListener("click",(()=>C(function(){if(y("cards").length){const e=function(){const e=document.createElement("div");e.className="modal-order";const t=document.createElement("button");t.className="close-modal",t.type="button",e.append(t);const n=document.createElement("span");n.className="close-modal-cross",t.append(n);const c=document.createElement("h2");c.className="modal-order__title",c.innerText="Оформление заказа",e.append(c);const a=document.createElement("h5");a.className="modal-order__info",a.innerText="Контактный телефон",e.append(a);const o=document.createElement("form");o.className="modal-order__form",o.action="#",o.name="order-form",e.append(o);const r=document.createElement("input");r.className="modal-order__input-phone-num",r.placeholder="Телефон",r.name="order-input-tel",r.type="tel",r.setAttribute("maxlength","18"),r.setAttribute("required",""),o.append(r);const d=document.createElement("button");d.className="modal-order__btn-accept",d.innerText="Оформить заказ",d.type="submit",o.append(d);const s=document.createElement("p");return s.className="modal-order__terms",s.innerText="Согласен с условиями Правил пользования торговой площадкой и правилами возврата",e.append(s),e}();return document.addEventListener("click",(e=>{if(e.target.matches(".modal-order__input-phone-num"))e.target.addEventListener("keydown",F),e.target.addEventListener("input",z),e.target.addEventListener("paste",J);else if(e.target.matches(".modal-order__btn-accept")&&(e.preventDefault(),document.querySelector(".modal-order__input-phone-num").value)){const t=e.target.closest(".modal-background");t.innerHTML="",document.querySelector(".modal-background").remove();const n=function(){const e=document.createElement("div");e.className="modal-order";const t=document.createElement("button");t.className="close-modal",t.type="button",e.append(t);const n=document.createElement("span");n.className="close-modal-cross",t.append(n);const c=document.createElement("h2");c.className="modal-order__title",c.innerText="Ваш заказ успешно оформлен!",e.append(c);const a=document.createElement("h5");return a.className="modal-order__info",a.innerText="Ожидайте звонка менеджера...",e.append(a),e}();t.append(n),localStorage.clear(),T(),j(),document.querySelector(".close-modal").addEventListener("click",(e=>A(e)))}})),e}return function(){const e=document.createElement("div");e.className="modal-order";const t=document.createElement("button");t.className="close-modal",t.type="button",e.append(t);const n=document.createElement("span");n.className="close-modal-cross",t.append(n);const c=document.createElement("h2");c.className="modal-order__title",c.innerText="В корзине пока пусто",e.append(c);const a=document.createElement("h5");return a.className="modal-order__info",a.innerText="Загляните на главную, чтобы выбрать товары или найдите нужное в поиске",e.append(a),e}()}()))),t}function M(e){const t=document.querySelector(".basket-window__cards-container");if(t.innerHTML="",e.length>0)e.forEach((({image:e,price:n,oldPrice:c,productsBrand:a,productsName:o,id:r,count:d})=>{const s=function(e,t,n,c,a,o,r=1){const d=document.createElement("div");d.className="basket-card",d.id=`${o}`;const s=document.createElement("div");s.className="basket-card-content-block",d.append(s);const l=document.createElement("div");l.className="basket-card-content-block__image",s.append(l);const i=document.createElement("img");i.className="basket-card-content-block__image-icon",i.alt="product image",i.src=`${e}`,l.append(i);const m=document.createElement("div");m.className="basket-card-content-block__info",s.append(m);const u=document.createElement("h4");u.className="basket-card-content-block__info-name",u.innerText=`${a}`,m.append(u);const p=document.createElement("h5");p.className="basket-card-content-block__info-brand",p.innerText=`${c}`,m.append(p);const _=document.createElement("div");_.className="basket-card-price-block",d.append(_);const b=document.createElement("div");b.className="basket-card-controls",_.append(b);const g=document.createElement("div");g.className="basket-card-controls__item-counter",b.append(g);const h=document.createElement("button");h.className="basket-card-controls__item-counter-minus",h.type="button",h.innerText="−",g.append(h),1===r&&(h.disabled=!0);const E=document.createElement("div");E.className="basket-card-controls__item-counter-value",E.innerText=`${r}`,g.append(E);const N=document.createElement("button");N.className="basket-card-controls__item-counter-plus",N.type="button",N.innerText="+",g.append(N);const v=document.createElement("button");v.className="basket-card-controls__remove-btn",v.type="button",b.append(v);const y=new Image;y.className="basket-card-controls__remove-btn-icon",y.src=f,v.append(y);const k=document.createElement("div");k.className="basket-card-price",_.append(k);const w=document.createElement("p");w.className="basket-card-price__new-price",w.innerText=`${t} ₽`,k.append(w);const x=document.createElement("span");return x.className="basket-card-price__old-price",x.innerText=`${n} ₽`,k.append(x),d}(e,n,c,a,o,r,d);t.append(s)}));else{const e=function(){const e=document.createElement("div");e.className="empty-basket";const t=new Image;t.className="empty-basket__image",t.src=g,e.append(t);const n=document.createElement("h3");return n.className="empty-basket__text",n.innerText="Ваша корзина пуста ... ",e.append(n),e}();t.append(e)}}function H(e){if("basket-card-controls__remove-btn-icon"===e.target.className){const t=e.target.closest(".basket-card"),n=y("cards").filter((e=>e.id!==t.id));k("changeButton",y("changeButton").map((e=>(e.id===t.id&&(e.inBasket=!e.inBasket),e)))),k("cards",n),j(),M(n),T();const c=document.querySelector(".modal-background");c.innerHTML="",c.append(I()),y("cards").length||localStorage.clear();document.querySelector(".close-modal").addEventListener("click",(e=>A(e)))}}function j(){const e=y("cards"),t=document.querySelector(".main-header__basket-product-counter");if(e.length>0){t.style.display="inline-block";document.querySelector(".main-header__basket-product-count").innerText=`${e.length}`}else t.style.display="none"}function W(e){if(y("cards").length){const t=e.target.closest(".basket-card"),n=y("cards"),c=y("changeButton").find((e=>e.id===t.id)).price;if("basket-card-controls__item-counter-plus"===e.target.className){O(n.map((e=>(e.id===t.id&&(e.count||(e.count=1),e.count=e.count+1,e.price=e.price+c),e))))}else if("basket-card-controls__item-counter-minus"===e.target.className){O(n.map((e=>(e.id===t.id&&e.count>1&&e.id===t.id&&(e.count||(e.count=1),e.count=e.count-1,e.price=e.price-c),e))))}}}function O(e){k("cards",e),M(e);const t=document.querySelector(".modal-background");t.innerHTML="",t.append(I());document.querySelector(".close-modal").addEventListener("click",(e=>A(e)))}const P="https://63e9269e811db3d7eff7f6ff.mockapi.io/products";async function X(e){if("product-card__image"===e.target.className){const t=await fetch(P);!function(e){e.forEach((({image:e,price:t,oldPrice:n,productsBrand:c,productsName:a,id:o,inBasket:r})=>{const d=function(e,t,n,c,a,o,r){const d=document.createElement("div");d.className="big-product-card";const s=document.createElement("button");s.className="close-modal",s.type="button",d.append(s);const l=document.createElement("span");l.className="close-modal-cross",s.append(l);const i=document.createElement("img");i.className="big-product-card__image",i.alt="product image",i.id=`${o}`,i.src=`${e}`,d.append(i);const m=document.createElement("div");m.className="big-product-card__no-picture-block",d.append(m);const u=document.createElement("div");u.className="big-product-card__product-description-box",m.append(u);const p=document.createElement("span");p.className="big-product-card__product-brand",p.innerText=`${c} ·`,u.append(p);const _=document.createElement("span");_.className="big-product-card__product-name",_.innerText=`${a}`,u.append(_);const b=document.createElement("div");b.className="big-product-card__price-box",m.append(b);const f=document.createElement("span");f.className="big-product-card__price",f.innerText=`${t} ₽ `,b.append(f);const g=document.createElement("span");g.className="big-product-card__discount",g.innerText=`-${Math.round(100*t/n)}% `,b.append(g);const h=document.createElement("span");return h.className="big-product-card__old-price",h.innerText=`${n} ₽ `,b.append(h),d}(e,t,n,c,a,o);C(d)}))}((await t.json()).filter((t=>+t.id==+e.target.id)))}}function Y(e){return e.value.replace(/\D/g,"")}function J(e){const t=e.target,n=Y(t),c=e.clipboardData||window.clipboardData;if(c){const e=c.getData("Text");/\D/g.test(e)&&(t.value=n)}}function z(e){const t=e.target;let n=Y(t);const c=t.selectionStart;let a="";if(!n)return t.value="";if(t.value.length===c){if(["7","8","9"].indexOf(n[0])>-1){"9"===n[0]&&(n="7"+n);const e="8"===n[0]?"8":"+7";a=t.value=e+" ",n.length>1&&(a+="("+n.substring(1,4)),n.length>=5&&(a+=") "+n.substring(4,7)),n.length>=8&&(a+="-"+n.substring(7,9)),n.length>=10&&(a+="-"+n.substring(9,11))}else a="+"+n.substring(0,16);t.value=a}else e.data&&/\D/g.test(e.data)&&(t.value=n)}function F(e){const t=e.target.value.replace(/\D/g,"");8===e.keyCode&&1===t.length&&(e.target.value="")}!function(){document.querySelector(".main-header__basket").addEventListener("click",(()=>C(I()))),j(),n.addEventListener("click",i),t.addEventListener("click",m),d.addEventListener("click",u),T(),document.querySelector(".main-header__search-input").addEventListener("input",v);const e=document.querySelector(".product-cards__container");e.addEventListener("click",S),e.addEventListener("click",X);const c=b(),a=function(){const e=document.createElement("button");e.type="button",e.className="phone-button";const t=document.createElement("a");t.className="phone-button__link",t.href="tel: 84957755505",e.append(t);const n=new Image;return n.className="phone-button__link-img",n.src=_,t.append(n),e}();document.documentElement.append(c,a),window.addEventListener("scroll",(()=>function(e){window.pageYOffset>document.documentElement.clientHeight?e.classList.add("active"):e.classList.remove("active")}(c))),c.addEventListener("click",$)}()})();